<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ZEUS⚡️P2P</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&family=Rajdhani:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* --- ESTILOS GERAIS (CSS CRÍTICO) --- */
        :root { --primary: #0ABAB5; --bg-dark: #020205; --text-main: #ffffff; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Outfit', sans-serif; }
        body { background-color: var(--bg-dark); color: var(--text-main); height: 100vh; overflow: hidden; }

        /* UTILITÁRIOS DE VISIBILIDADE */
        .hidden { display: none !important; opacity: 0; }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* SPLASH SCREEN (Raio) */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #020205; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.5s ease-out;
        }
        .hero-logo-animate { animation: heroFloat 3s ease-in-out infinite; }
        @keyframes heroFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

        /* RESTO DOS ESTILOS DO APP (Compactados para não quebrar) */
        .btn-primary { background: linear-gradient(135deg, #0ABAB5, #0F52BA); color: #fff; border: none; padding: 16px; border-radius: 14px; font-weight: 600; width: 100%; margin-top:10px; }
        .login-card { background: rgba(20, 20, 30, 0.6); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 25px; margin-bottom: 20px; text-align: center; }
        .login-avatar { width: 70px; height: 70px; border-radius: 50%; background: #333; margin: 0 auto 15px auto; border: 2px solid #0ABAB5; }
        .custom-input { width: 100%; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); padding: 12px; border-radius: 10px; color: #fff; margin-bottom: 10px; }
        
        /* Dashboard e Telas Internas */
        .screen-header { padding: 20px; display: flex; justify-content: space-between; align-items: center; }
        .actions-menu { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; padding: 15px; }
        .menu-item { display: flex; flex-direction: column; align-items: center; gap: 5px; font-size: 0.7rem; color: #aaa; }
        .menu-btn { width: 50px; height: 50px; background: rgba(255,255,255,0.1); border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; color: #fff; }
        
        /* Stats Card */
        .stat-card-main { background: linear-gradient(180deg, rgba(0, 224, 150, 0.1), rgba(0,0,0,0)); border: 1px solid rgba(0, 224, 150, 0.3); border-radius: 20px; padding: 20px; margin: 15px; }
    </style>
</head>
<body>

    <section id="splash-screen">
        <div class="hero-logo-animate" style="width:120px; height:120px; background:linear-gradient(180deg, rgba(10,186,181,0.1), rgba(15,82,186,0.2)); border-radius:35px; display:flex; align-items:center; justify-content:center; border:1px solid rgba(255,255,255,0.1); box-shadow:0 0 40px rgba(10,186,181,0.2);">
            <i class="fas fa-bolt" style="font-size:4rem; color:#FFD700; filter:drop-shadow(0 0 20px rgba(255,215,0,0.5));"></i>
        </div>
        <p style="margin-top:20px; color:rgba(255,255,255,0.5); font-size:0.8rem;">Carregando sistema...</p>
    </section>

    <section id="login-screen" class="hidden">
        <div style="padding: 40px 20px; height: 100vh; display: flex; flex-direction: column; justify-content: center;">
            <div style="text-align:center; margin-bottom:40px;">
                <i class="fas fa-bolt" style="font-size:3rem; color:#FFD700;"></i>
                <h1 style="font-family:'Rajdhani'; margin-top:10px;">ZEUS P2P</h1>
            </div>

            <div class="login-card">
                <div class="login-avatar" id="tg-avatar"></div>
                <h3 id="tg-name">Usuário Telegram</h3>
                <p id="tg-id" style="font-size:0.8rem; color:#0ABAB5; margin-bottom:15px;">ID: ---</p>
                <button class="btn-primary" onclick="goToDash()" style="background:#229ED9;">
                    <i class="fab fa-telegram"></i> Entrar com Telegram
                </button>
            </div>

            <div class="login-card">
                <input type="text" class="custom-input" placeholder="E-mail ou Usuário">
                <input type="password" class="custom-input" placeholder="Senha">
                <button class="btn-primary" onclick="goToDash()">Criar Conta / Entrar</button>
            </div>
        </div>
    </section>

    <section id="main-app" class="hidden">
        <div class="screen-header">
            <div><span style="font-size:0.8rem; color:#0ABAB5;">Bem-vindo,</span><h3 id="dash-name">Usuário</h3></div>
            <i class="fas fa-bell" style="font-size:1.2rem;"></i>
        </div>
        
        <div class="stat-card-main">
            <p style="font-size:0.8rem; color:#00E096; letter-spacing:1px;">SALDO DISPONÍVEL</p>
            <h1 style="font-family:'Rajdhani'; font-size:2.5rem; margin:10px 0;">R$ 14.250,90</h1>
        </div>

        <div class="actions-menu">
            <div class="menu-item"><div class="menu-btn"><i class="fas fa-money-bill-transfer"></i></div>PIX</div>
            <div class="menu-item"><div class="menu-btn"><i class="fas fa-barcode"></i></div>Boleto</div>
            <div class="menu-item"><div class="menu-btn"><i class="fas fa-wallet"></i></div>Cripto</div>
            <div class="menu-item"><div class="menu-btn"><i class="fas fa-headset"></i></div>Ajuda</div>
        </div>
    </section>

    <script>
        // --- LÓGICA DE INICIALIZAÇÃO SEGURA ---
        
        // 1. Diz ao Telegram que o App está pronto
        const tg = window.Telegram.WebApp;
        tg.ready(); 
        tg.expand(); // Tenta ocupar a tela toda

        function initApp() {
            console.log("Iniciando App...");
            
            // Tenta pegar dados do usuário
            try {
                const user = tg.initDataUnsafe?.user;
                if (user) {
                    document.getElementById('tg-name').innerText = user.first_name + (user.last_name ? ' ' + user.last_name : '');
                    document.getElementById('tg-id').innerText = "ID: " + user.id;
                    document.getElementById('dash-name').innerText = user.first_name;
                }
            } catch (e) {
                console.error("Erro ao ler dados do Telegram", e);
            }

            // Remove a tela de Splash e mostra o Login
            setTimeout(() => {
                document.getElementById('splash-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('splash-screen').classList.add('hidden');
                    document.getElementById('login-screen').classList.remove('hidden');
                    document.getElementById('login-screen').classList.add('fade-in');
                }, 500);
            }, 1500); // Aguarda 1.5s para dar tempo de carregar fontes
        }

        // 2. Event Listener Principal (Tenta carregar assim que o DOM estiver pronto)
        document.addEventListener('DOMContentLoaded', initApp);

        // 3. FAILSAFE (Segurança Extrema)
        // Se por algum motivo o evento acima falhar, força a abertura após 3 segundos
        setTimeout(() => {
            const splash = document.getElementById('splash-screen');
            if (!splash.classList.contains('hidden') && splash.style.opacity !== '0') {
                console.log("Forçando abertura pelo Failsafe...");
                initApp();
            }
        }, 3000);

        // --- NAVEGAÇÃO ---
        function goToDash() {
            if(tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('main-app').classList.remove('hidden');
            document.getElementById('main-app').classList.add('fade-in');
        }

    </script>
</body>
</html>

